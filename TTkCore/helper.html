<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>TermTk.TTkCore.helper API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>TermTk.TTkCore.helper</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#!/usr/bin/env python3

# MIT License
#
# Copyright (c) 2021 Eugenio Parodi &lt;ceccopierangiolieugenio AT googlemail DOT com&gt;
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the &#34;Software&#34;), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in all
# copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED &#34;AS IS&#34;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
# SOFTWARE.

import TermTk.libbpytop as lbt
from TermTk.TTkCore.log import TTkLog
from TermTk.TTkCore.cfg import TTkCfg, TTkGlbl
from TermTk.TTkCore.constant import TTkK

class TTkHelper:
    # TODO: Add Setter/Getter
    _focusWidget = None
    _rootCanvas = None
    _rootWidget = None
    _updateWidget = []
    _updateBuffer  = []
    _cursorPos = [0,0]
    _cursor = False
    _cursorType = lbt.Term.cursor_blinking_block
    class _Overlay():
        __slots__ = (&#39;_widget&#39;,&#39;_x&#39;,&#39;_y&#39;)
        def __init__(self,x,y,widget):
            self._widget = widget
            widget.move(x,y)
    _savedFocus = None
    _overlay = []

    class _Shortcut():
        __slots__ = (&#39;_letter&#39;,&#39;_widget&#39;)
        def __init__(self, letter, widget):
            self._letter = letter.lower()
            self._widget = widget
    _shortcut = []

    @staticmethod
    def addShortcut(widget, letter):
        TTkHelper._shortcut.append(TTkHelper._Shortcut(letter, widget))

    @staticmethod
    def isParent(parent, widget):
        if parent==widget: return True
        if widget.parentWidget() is None: return False
        return TTkHelper.isParent(parent,widget.parentWidget())

    @staticmethod
    def execShortcut(letter, widget=None):
        if not isinstance(letter, str): return
        for sc in TTkHelper._shortcut:
            if sc._letter == letter.lower() and sc._widget.isVisible():
                if not widget or TTkHelper.isParent(widget, sc._widget):
                    sc._widget.shortcutEvent()
                    return

    @staticmethod
    def addUpdateWidget(widget):
        if not widget.isVisible(): return
        if widget not in TTkHelper._updateWidget:
            TTkHelper._updateWidget.append(widget)

    @staticmethod
    def addUpdateBuffer(canvas):
        if canvas is not TTkHelper._rootCanvas:
            if canvas not in TTkHelper._updateBuffer:
                TTkHelper._updateBuffer.append(canvas)

    @staticmethod
    def registerRootWidget(widget):
        TTkHelper._rootCanvas = widget.getCanvas()
        TTkHelper._rootWidget = widget
        TTkHelper._rootCanvas.enableDoubleBuffer()
        TTkHelper._updateBuffer = []
        TTkHelper._updateWidget = []

    @staticmethod
    def rootOverlay(widget):
        if widget is None:
            return None
        if not TTkHelper._overlay:
            return None
        overlayWidgets = [o._widget for o in TTkHelper._overlay]
        while widget is not None:
            if widget in overlayWidgets:
                return widget
            widget = widget.parentWidget()
        return None

    @staticmethod
    def isOverlay(widget):
         return TTkHelper.rootOverlay(widget) is not None

    @staticmethod
    def overlay(caller, widget, x, y):
        wx, wy = TTkHelper.absPos(caller)
        w,h = widget.size()
        if not TTkHelper._savedFocus and \
           not TTkHelper.isOverlay(TTkHelper._focusWidget):
            TTkHelper._savedFocus = TTkHelper._focusWidget
        # Try to keep the overlay widget inside the terminal
        wx = max(0, wx+x if wx+x+w &lt; TTkGlbl.term_w else TTkGlbl.term_w-w )
        wy = max(0, wy+y if wy+y+h &lt; TTkGlbl.term_h else TTkGlbl.term_h-h )
        TTkHelper._overlay.append(TTkHelper._Overlay(wx,wy,widget))
        TTkHelper._rootWidget.rootLayout().addWidget(widget)
        widget.setFocus()
        widget.raiseWidget()

    @staticmethod
    def getOverlay():
        if TTkHelper._overlay:
            return TTkHelper._overlay[-1]._widget
        return None

    @staticmethod
    def removeOverlay():
        for widget in TTkHelper._overlay:
            TTkHelper._rootWidget.rootLayout().removeWidget(widget._widget)
        TTkHelper._overlay = []
        if TTkHelper._focusWidget:
            TTkHelper._focusWidget.clearFocus()
        if TTkHelper._savedFocus:
            bk = TTkHelper._savedFocus
            TTkHelper._savedFocus = None
            bk.setFocus()

    @staticmethod
    def removeSingleOverlay(widget):
        if len(TTkHelper._overlay) &lt;= 1:
            return TTkHelper.removeOverlay()
        rootWidget = TTkHelper.rootOverlay(widget)
        rootWidget
        for o in TTkHelper._overlay:
            if o._widget == rootWidget:
                TTkHelper._overlay.remove(o)
        TTkHelper._rootWidget.rootLayout().removeWidget(rootWidget)
        TTkHelper._overlay[-1]._widget.setFocus()

    @staticmethod
    def paintAll():
        &#39;&#39;&#39;
            _updateBuffer = list widgets that require a repaint [paintEvent]
            _updateWidget = list widgets that need to be pushed below
        &#39;&#39;&#39;
        if TTkHelper._rootCanvas is None:
            return

        # Build a list of buffers to be repainted
        updateBuffers = TTkHelper._updateBuffer.copy()
        updateWidgets = TTkHelper._updateWidget.copy()

        # TTkLog.debug(f&#34;{len(TTkHelper._updateBuffer)} {len(TTkHelper._updateWidget)}&#34;)
        for widget in TTkHelper._updateWidget:
            if not widget.isVisible(): continue
            parent = widget.parentWidget()
            while parent is not None:
                if parent not in updateBuffers:
                    updateBuffers.append(parent)
                if parent not in updateWidgets:
                    updateWidgets.append(parent)
                parent = parent.parentWidget()

        TTkHelper._updateBuffer = []
        TTkHelper._updateWidget = []

        # Paint all the canvas
        for widget in updateBuffers:
            if not widget.isVisible(): continue
            # Resize the canvas just before the paintEvent
            # to avoid too many allocations
            widget.getCanvas().updateSize()
            widget.getCanvas().clean()
            widget.paintEvent()

        # Compose all the canvas to the parents
        # From the deepest childs to the bottom
        pushToTerminal = False
        sortedUpdateWidget = [ (w, TTkHelper.widgetDepth(w)) for w in updateWidgets]
        sortedUpdateWidget = sorted(sortedUpdateWidget, key=lambda w: -w[1])
        for w in sortedUpdateWidget:
            widget = w[0]
            if not widget.isVisible(): continue
            pushToTerminal = True
            widget.paintChildCanvas()

        if pushToTerminal:
            if TTkHelper._cursor:
                lbt.Term.hideCursor()
            if TTkCfg.doubleBuffer:
                TTkHelper._rootCanvas.pushToTerminalBuffered(0, 0, TTkGlbl.term_w, TTkGlbl.term_h)
            else:
                TTkHelper._rootCanvas.pushToTerminal(0, 0, TTkGlbl.term_w, TTkGlbl.term_h)
            if TTkHelper._cursor:
                x,y = TTkHelper._cursorPos
                lbt.Term.push(lbt.Mv.to(y+1,x+1))
                lbt.Term.showCursor(TTkHelper._cursorType)

    @staticmethod
    def widgetDepth(widget) -&gt; int:
        if widget is None:
            return 0
        return 1 + TTkHelper.widgetDepth(widget.parentWidget())

    @staticmethod
    def absPos(widget) -&gt; (int,int):
        ppos = TTkHelper.absParentPos(widget)
        wpos = widget.pos()
        return (wpos[0]+ppos[0], wpos[1]+ppos[1])

    @staticmethod
    def absParentPos(widget) -&gt; (int,int):
        if widget is None or widget.parentWidget() is None:
            return (0, 0)
        return TTkHelper.absPos(widget.parentWidget())


    def _iterWidgets(item):
        for child in item.children():
            if child.layoutItemType == TTkK.WidgetItem:
                if not child.widget().isVisible(): continue
                yield child.widget()
                for i in TTkHelper._iterWidgets(child.widget().rootLayout()):
                    yield i
            if child.layoutItemType == TTkK.LayoutItem:
                for i in TTkHelper._iterWidgets(child):
                    yield i

    def nextFocus(widget):
        rootWidget = TTkHelper.rootOverlay(widget)
        if not rootWidget:
            rootWidget =  TTkHelper._rootWidget
        if widget == rootWidget:
            widget = None
        first = None
        for w in TTkHelper._iterWidgets(rootWidget.rootLayout()):
            if not first and w.focusPolicy() &amp; TTkK.TabFocus == TTkK.TabFocus:
                first = w
            # TTkLog.debug(f&#34;{w._name} {widget}&#34;)
            if widget:
                if w == widget:
                    widget=None
                continue
            if w.focusPolicy() &amp; TTkK.TabFocus == TTkK.TabFocus:
                w.setFocus()
                w.update()
                return
        if first:
            first.setFocus()
            first.update()

    def prevFocus(widget):
        rootWidget = TTkHelper.rootOverlay(widget)
        if not rootWidget:
            rootWidget = TTkHelper._rootWidget
        if widget == rootWidget:
            widget = None
        prev = None
        for w in TTkHelper._iterWidgets(rootWidget.rootLayout()):
            # TTkLog.debug(f&#34;{w._name} {widget}&#34;)
            if w == widget:
                widget=None
                if prev:
                    break
            if w.focusPolicy() &amp; TTkK.TabFocus == TTkK.TabFocus:
                prev = w
        if prev:
            prev.setFocus()
            prev.update()

    @staticmethod
    def setFocus(widget):
        TTkHelper._focusWidget = widget

    @staticmethod
    def getFocus():
        return TTkHelper._focusWidget

    @staticmethod
    def clearFocus():
        TTkHelper._focusWidget = None

    @staticmethod
    def showCursor(cursorType = TTkK.Cursor_Blinking_Block):
        if   cursorType == TTkK.Cursor_Blinking_Block      : TTkHelper._cursorType = lbt.Term.cursor_blinking_block
        elif cursorType == TTkK.Cursor_Blinking_Block_Also : TTkHelper._cursorType = lbt.Term.cursor_blinking_block_also
        elif cursorType == TTkK.Cursor_Steady_Block        : TTkHelper._cursorType = lbt.Term.cursor_steady_block
        elif cursorType == TTkK.Cursor_Blinking_Underline  : TTkHelper._cursorType = lbt.Term.cursor_blinking_underline
        elif cursorType == TTkK.Cursor_Steady_Underline    : TTkHelper._cursorType = lbt.Term.cursor_steady_underline
        elif cursorType == TTkK.Cursor_Blinking_Bar        : TTkHelper._cursorType = lbt.Term.cursor_blinking_bar
        elif cursorType == TTkK.Cursor_Steady_Bar          : TTkHelper._cursorType = lbt.Term.cursor_steady_bar
        lbt.Term.showCursor(TTkHelper._cursorType)
        TTkHelper._cursor = True
    @staticmethod
    def hideCursor():
        lbt.Term.hideCursor()
        TTkHelper._cursorType = lbt.Term.cursor_blinking_block
        TTkHelper._cursor = False
    @staticmethod
    def moveCursor(widget, x, y):
        xx, yy = TTkHelper.absPos(widget)
        TTkHelper._cursorPos = [xx+x,yy+y]
        lbt.Term.push(lbt.Mv.to(yy+y+1,xx+x+1))


    class Color(lbt.Color): pass
    class Mv(lbt.Mv): pass</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="TermTk.TTkCore.helper.TTkHelper"><code class="flex name class">
<span>class <span class="ident">TTkHelper</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TTkHelper:
    # TODO: Add Setter/Getter
    _focusWidget = None
    _rootCanvas = None
    _rootWidget = None
    _updateWidget = []
    _updateBuffer  = []
    _cursorPos = [0,0]
    _cursor = False
    _cursorType = lbt.Term.cursor_blinking_block
    class _Overlay():
        __slots__ = (&#39;_widget&#39;,&#39;_x&#39;,&#39;_y&#39;)
        def __init__(self,x,y,widget):
            self._widget = widget
            widget.move(x,y)
    _savedFocus = None
    _overlay = []

    class _Shortcut():
        __slots__ = (&#39;_letter&#39;,&#39;_widget&#39;)
        def __init__(self, letter, widget):
            self._letter = letter.lower()
            self._widget = widget
    _shortcut = []

    @staticmethod
    def addShortcut(widget, letter):
        TTkHelper._shortcut.append(TTkHelper._Shortcut(letter, widget))

    @staticmethod
    def isParent(parent, widget):
        if parent==widget: return True
        if widget.parentWidget() is None: return False
        return TTkHelper.isParent(parent,widget.parentWidget())

    @staticmethod
    def execShortcut(letter, widget=None):
        if not isinstance(letter, str): return
        for sc in TTkHelper._shortcut:
            if sc._letter == letter.lower() and sc._widget.isVisible():
                if not widget or TTkHelper.isParent(widget, sc._widget):
                    sc._widget.shortcutEvent()
                    return

    @staticmethod
    def addUpdateWidget(widget):
        if not widget.isVisible(): return
        if widget not in TTkHelper._updateWidget:
            TTkHelper._updateWidget.append(widget)

    @staticmethod
    def addUpdateBuffer(canvas):
        if canvas is not TTkHelper._rootCanvas:
            if canvas not in TTkHelper._updateBuffer:
                TTkHelper._updateBuffer.append(canvas)

    @staticmethod
    def registerRootWidget(widget):
        TTkHelper._rootCanvas = widget.getCanvas()
        TTkHelper._rootWidget = widget
        TTkHelper._rootCanvas.enableDoubleBuffer()
        TTkHelper._updateBuffer = []
        TTkHelper._updateWidget = []

    @staticmethod
    def rootOverlay(widget):
        if widget is None:
            return None
        if not TTkHelper._overlay:
            return None
        overlayWidgets = [o._widget for o in TTkHelper._overlay]
        while widget is not None:
            if widget in overlayWidgets:
                return widget
            widget = widget.parentWidget()
        return None

    @staticmethod
    def isOverlay(widget):
         return TTkHelper.rootOverlay(widget) is not None

    @staticmethod
    def overlay(caller, widget, x, y):
        wx, wy = TTkHelper.absPos(caller)
        w,h = widget.size()
        if not TTkHelper._savedFocus and \
           not TTkHelper.isOverlay(TTkHelper._focusWidget):
            TTkHelper._savedFocus = TTkHelper._focusWidget
        # Try to keep the overlay widget inside the terminal
        wx = max(0, wx+x if wx+x+w &lt; TTkGlbl.term_w else TTkGlbl.term_w-w )
        wy = max(0, wy+y if wy+y+h &lt; TTkGlbl.term_h else TTkGlbl.term_h-h )
        TTkHelper._overlay.append(TTkHelper._Overlay(wx,wy,widget))
        TTkHelper._rootWidget.rootLayout().addWidget(widget)
        widget.setFocus()
        widget.raiseWidget()

    @staticmethod
    def getOverlay():
        if TTkHelper._overlay:
            return TTkHelper._overlay[-1]._widget
        return None

    @staticmethod
    def removeOverlay():
        for widget in TTkHelper._overlay:
            TTkHelper._rootWidget.rootLayout().removeWidget(widget._widget)
        TTkHelper._overlay = []
        if TTkHelper._focusWidget:
            TTkHelper._focusWidget.clearFocus()
        if TTkHelper._savedFocus:
            bk = TTkHelper._savedFocus
            TTkHelper._savedFocus = None
            bk.setFocus()

    @staticmethod
    def removeSingleOverlay(widget):
        if len(TTkHelper._overlay) &lt;= 1:
            return TTkHelper.removeOverlay()
        rootWidget = TTkHelper.rootOverlay(widget)
        rootWidget
        for o in TTkHelper._overlay:
            if o._widget == rootWidget:
                TTkHelper._overlay.remove(o)
        TTkHelper._rootWidget.rootLayout().removeWidget(rootWidget)
        TTkHelper._overlay[-1]._widget.setFocus()

    @staticmethod
    def paintAll():
        &#39;&#39;&#39;
            _updateBuffer = list widgets that require a repaint [paintEvent]
            _updateWidget = list widgets that need to be pushed below
        &#39;&#39;&#39;
        if TTkHelper._rootCanvas is None:
            return

        # Build a list of buffers to be repainted
        updateBuffers = TTkHelper._updateBuffer.copy()
        updateWidgets = TTkHelper._updateWidget.copy()

        # TTkLog.debug(f&#34;{len(TTkHelper._updateBuffer)} {len(TTkHelper._updateWidget)}&#34;)
        for widget in TTkHelper._updateWidget:
            if not widget.isVisible(): continue
            parent = widget.parentWidget()
            while parent is not None:
                if parent not in updateBuffers:
                    updateBuffers.append(parent)
                if parent not in updateWidgets:
                    updateWidgets.append(parent)
                parent = parent.parentWidget()

        TTkHelper._updateBuffer = []
        TTkHelper._updateWidget = []

        # Paint all the canvas
        for widget in updateBuffers:
            if not widget.isVisible(): continue
            # Resize the canvas just before the paintEvent
            # to avoid too many allocations
            widget.getCanvas().updateSize()
            widget.getCanvas().clean()
            widget.paintEvent()

        # Compose all the canvas to the parents
        # From the deepest childs to the bottom
        pushToTerminal = False
        sortedUpdateWidget = [ (w, TTkHelper.widgetDepth(w)) for w in updateWidgets]
        sortedUpdateWidget = sorted(sortedUpdateWidget, key=lambda w: -w[1])
        for w in sortedUpdateWidget:
            widget = w[0]
            if not widget.isVisible(): continue
            pushToTerminal = True
            widget.paintChildCanvas()

        if pushToTerminal:
            if TTkHelper._cursor:
                lbt.Term.hideCursor()
            if TTkCfg.doubleBuffer:
                TTkHelper._rootCanvas.pushToTerminalBuffered(0, 0, TTkGlbl.term_w, TTkGlbl.term_h)
            else:
                TTkHelper._rootCanvas.pushToTerminal(0, 0, TTkGlbl.term_w, TTkGlbl.term_h)
            if TTkHelper._cursor:
                x,y = TTkHelper._cursorPos
                lbt.Term.push(lbt.Mv.to(y+1,x+1))
                lbt.Term.showCursor(TTkHelper._cursorType)

    @staticmethod
    def widgetDepth(widget) -&gt; int:
        if widget is None:
            return 0
        return 1 + TTkHelper.widgetDepth(widget.parentWidget())

    @staticmethod
    def absPos(widget) -&gt; (int,int):
        ppos = TTkHelper.absParentPos(widget)
        wpos = widget.pos()
        return (wpos[0]+ppos[0], wpos[1]+ppos[1])

    @staticmethod
    def absParentPos(widget) -&gt; (int,int):
        if widget is None or widget.parentWidget() is None:
            return (0, 0)
        return TTkHelper.absPos(widget.parentWidget())


    def _iterWidgets(item):
        for child in item.children():
            if child.layoutItemType == TTkK.WidgetItem:
                if not child.widget().isVisible(): continue
                yield child.widget()
                for i in TTkHelper._iterWidgets(child.widget().rootLayout()):
                    yield i
            if child.layoutItemType == TTkK.LayoutItem:
                for i in TTkHelper._iterWidgets(child):
                    yield i

    def nextFocus(widget):
        rootWidget = TTkHelper.rootOverlay(widget)
        if not rootWidget:
            rootWidget =  TTkHelper._rootWidget
        if widget == rootWidget:
            widget = None
        first = None
        for w in TTkHelper._iterWidgets(rootWidget.rootLayout()):
            if not first and w.focusPolicy() &amp; TTkK.TabFocus == TTkK.TabFocus:
                first = w
            # TTkLog.debug(f&#34;{w._name} {widget}&#34;)
            if widget:
                if w == widget:
                    widget=None
                continue
            if w.focusPolicy() &amp; TTkK.TabFocus == TTkK.TabFocus:
                w.setFocus()
                w.update()
                return
        if first:
            first.setFocus()
            first.update()

    def prevFocus(widget):
        rootWidget = TTkHelper.rootOverlay(widget)
        if not rootWidget:
            rootWidget = TTkHelper._rootWidget
        if widget == rootWidget:
            widget = None
        prev = None
        for w in TTkHelper._iterWidgets(rootWidget.rootLayout()):
            # TTkLog.debug(f&#34;{w._name} {widget}&#34;)
            if w == widget:
                widget=None
                if prev:
                    break
            if w.focusPolicy() &amp; TTkK.TabFocus == TTkK.TabFocus:
                prev = w
        if prev:
            prev.setFocus()
            prev.update()

    @staticmethod
    def setFocus(widget):
        TTkHelper._focusWidget = widget

    @staticmethod
    def getFocus():
        return TTkHelper._focusWidget

    @staticmethod
    def clearFocus():
        TTkHelper._focusWidget = None

    @staticmethod
    def showCursor(cursorType = TTkK.Cursor_Blinking_Block):
        if   cursorType == TTkK.Cursor_Blinking_Block      : TTkHelper._cursorType = lbt.Term.cursor_blinking_block
        elif cursorType == TTkK.Cursor_Blinking_Block_Also : TTkHelper._cursorType = lbt.Term.cursor_blinking_block_also
        elif cursorType == TTkK.Cursor_Steady_Block        : TTkHelper._cursorType = lbt.Term.cursor_steady_block
        elif cursorType == TTkK.Cursor_Blinking_Underline  : TTkHelper._cursorType = lbt.Term.cursor_blinking_underline
        elif cursorType == TTkK.Cursor_Steady_Underline    : TTkHelper._cursorType = lbt.Term.cursor_steady_underline
        elif cursorType == TTkK.Cursor_Blinking_Bar        : TTkHelper._cursorType = lbt.Term.cursor_blinking_bar
        elif cursorType == TTkK.Cursor_Steady_Bar          : TTkHelper._cursorType = lbt.Term.cursor_steady_bar
        lbt.Term.showCursor(TTkHelper._cursorType)
        TTkHelper._cursor = True
    @staticmethod
    def hideCursor():
        lbt.Term.hideCursor()
        TTkHelper._cursorType = lbt.Term.cursor_blinking_block
        TTkHelper._cursor = False
    @staticmethod
    def moveCursor(widget, x, y):
        xx, yy = TTkHelper.absPos(widget)
        TTkHelper._cursorPos = [xx+x,yy+y]
        lbt.Term.push(lbt.Mv.to(yy+y+1,xx+x+1))


    class Color(lbt.Color): pass
    class Mv(lbt.Mv): pass</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="TermTk.TTkCore.helper.TTkHelper.Color"><code class="name">var <span class="ident">Color</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.Mv"><code class="name">var <span class="ident">Mv</span></code></dt>
<dd>
<div class="desc"><p>Class with collection of cursor movement functions: .t<a href="line, column">o</a> | .r<a href="columns">ight</a> | .l<a href="columns">eft</a> | .u<a href="lines">p</a> | .d<a href="lines">own</a> | .save() | .restore()</p></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="TermTk.TTkCore.helper.TTkHelper.absParentPos"><code class="name flex">
<span>def <span class="ident">absParentPos</span></span>(<span>widget) ‑> (<class 'int'>, <class 'int'>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def absParentPos(widget) -&gt; (int,int):
    if widget is None or widget.parentWidget() is None:
        return (0, 0)
    return TTkHelper.absPos(widget.parentWidget())</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.absPos"><code class="name flex">
<span>def <span class="ident">absPos</span></span>(<span>widget) ‑> (<class 'int'>, <class 'int'>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def absPos(widget) -&gt; (int,int):
    ppos = TTkHelper.absParentPos(widget)
    wpos = widget.pos()
    return (wpos[0]+ppos[0], wpos[1]+ppos[1])</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.addShortcut"><code class="name flex">
<span>def <span class="ident">addShortcut</span></span>(<span>widget, letter)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def addShortcut(widget, letter):
    TTkHelper._shortcut.append(TTkHelper._Shortcut(letter, widget))</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.addUpdateBuffer"><code class="name flex">
<span>def <span class="ident">addUpdateBuffer</span></span>(<span>canvas)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def addUpdateBuffer(canvas):
    if canvas is not TTkHelper._rootCanvas:
        if canvas not in TTkHelper._updateBuffer:
            TTkHelper._updateBuffer.append(canvas)</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.addUpdateWidget"><code class="name flex">
<span>def <span class="ident">addUpdateWidget</span></span>(<span>widget)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def addUpdateWidget(widget):
    if not widget.isVisible(): return
    if widget not in TTkHelper._updateWidget:
        TTkHelper._updateWidget.append(widget)</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.clearFocus"><code class="name flex">
<span>def <span class="ident">clearFocus</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def clearFocus():
    TTkHelper._focusWidget = None</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.execShortcut"><code class="name flex">
<span>def <span class="ident">execShortcut</span></span>(<span>letter, widget=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def execShortcut(letter, widget=None):
    if not isinstance(letter, str): return
    for sc in TTkHelper._shortcut:
        if sc._letter == letter.lower() and sc._widget.isVisible():
            if not widget or TTkHelper.isParent(widget, sc._widget):
                sc._widget.shortcutEvent()
                return</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.getFocus"><code class="name flex">
<span>def <span class="ident">getFocus</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def getFocus():
    return TTkHelper._focusWidget</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.getOverlay"><code class="name flex">
<span>def <span class="ident">getOverlay</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def getOverlay():
    if TTkHelper._overlay:
        return TTkHelper._overlay[-1]._widget
    return None</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.hideCursor"><code class="name flex">
<span>def <span class="ident">hideCursor</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def hideCursor():
    lbt.Term.hideCursor()
    TTkHelper._cursorType = lbt.Term.cursor_blinking_block
    TTkHelper._cursor = False</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.isOverlay"><code class="name flex">
<span>def <span class="ident">isOverlay</span></span>(<span>widget)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def isOverlay(widget):
     return TTkHelper.rootOverlay(widget) is not None</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.isParent"><code class="name flex">
<span>def <span class="ident">isParent</span></span>(<span>parent, widget)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def isParent(parent, widget):
    if parent==widget: return True
    if widget.parentWidget() is None: return False
    return TTkHelper.isParent(parent,widget.parentWidget())</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.moveCursor"><code class="name flex">
<span>def <span class="ident">moveCursor</span></span>(<span>widget, x, y)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def moveCursor(widget, x, y):
    xx, yy = TTkHelper.absPos(widget)
    TTkHelper._cursorPos = [xx+x,yy+y]
    lbt.Term.push(lbt.Mv.to(yy+y+1,xx+x+1))</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.overlay"><code class="name flex">
<span>def <span class="ident">overlay</span></span>(<span>caller, widget, x, y)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def overlay(caller, widget, x, y):
    wx, wy = TTkHelper.absPos(caller)
    w,h = widget.size()
    if not TTkHelper._savedFocus and \
       not TTkHelper.isOverlay(TTkHelper._focusWidget):
        TTkHelper._savedFocus = TTkHelper._focusWidget
    # Try to keep the overlay widget inside the terminal
    wx = max(0, wx+x if wx+x+w &lt; TTkGlbl.term_w else TTkGlbl.term_w-w )
    wy = max(0, wy+y if wy+y+h &lt; TTkGlbl.term_h else TTkGlbl.term_h-h )
    TTkHelper._overlay.append(TTkHelper._Overlay(wx,wy,widget))
    TTkHelper._rootWidget.rootLayout().addWidget(widget)
    widget.setFocus()
    widget.raiseWidget()</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.paintAll"><code class="name flex">
<span>def <span class="ident">paintAll</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>_updateBuffer = list widgets that require a repaint [paintEvent]
_updateWidget = list widgets that need to be pushed below</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def paintAll():
    &#39;&#39;&#39;
        _updateBuffer = list widgets that require a repaint [paintEvent]
        _updateWidget = list widgets that need to be pushed below
    &#39;&#39;&#39;
    if TTkHelper._rootCanvas is None:
        return

    # Build a list of buffers to be repainted
    updateBuffers = TTkHelper._updateBuffer.copy()
    updateWidgets = TTkHelper._updateWidget.copy()

    # TTkLog.debug(f&#34;{len(TTkHelper._updateBuffer)} {len(TTkHelper._updateWidget)}&#34;)
    for widget in TTkHelper._updateWidget:
        if not widget.isVisible(): continue
        parent = widget.parentWidget()
        while parent is not None:
            if parent not in updateBuffers:
                updateBuffers.append(parent)
            if parent not in updateWidgets:
                updateWidgets.append(parent)
            parent = parent.parentWidget()

    TTkHelper._updateBuffer = []
    TTkHelper._updateWidget = []

    # Paint all the canvas
    for widget in updateBuffers:
        if not widget.isVisible(): continue
        # Resize the canvas just before the paintEvent
        # to avoid too many allocations
        widget.getCanvas().updateSize()
        widget.getCanvas().clean()
        widget.paintEvent()

    # Compose all the canvas to the parents
    # From the deepest childs to the bottom
    pushToTerminal = False
    sortedUpdateWidget = [ (w, TTkHelper.widgetDepth(w)) for w in updateWidgets]
    sortedUpdateWidget = sorted(sortedUpdateWidget, key=lambda w: -w[1])
    for w in sortedUpdateWidget:
        widget = w[0]
        if not widget.isVisible(): continue
        pushToTerminal = True
        widget.paintChildCanvas()

    if pushToTerminal:
        if TTkHelper._cursor:
            lbt.Term.hideCursor()
        if TTkCfg.doubleBuffer:
            TTkHelper._rootCanvas.pushToTerminalBuffered(0, 0, TTkGlbl.term_w, TTkGlbl.term_h)
        else:
            TTkHelper._rootCanvas.pushToTerminal(0, 0, TTkGlbl.term_w, TTkGlbl.term_h)
        if TTkHelper._cursor:
            x,y = TTkHelper._cursorPos
            lbt.Term.push(lbt.Mv.to(y+1,x+1))
            lbt.Term.showCursor(TTkHelper._cursorType)</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.registerRootWidget"><code class="name flex">
<span>def <span class="ident">registerRootWidget</span></span>(<span>widget)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def registerRootWidget(widget):
    TTkHelper._rootCanvas = widget.getCanvas()
    TTkHelper._rootWidget = widget
    TTkHelper._rootCanvas.enableDoubleBuffer()
    TTkHelper._updateBuffer = []
    TTkHelper._updateWidget = []</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.removeOverlay"><code class="name flex">
<span>def <span class="ident">removeOverlay</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def removeOverlay():
    for widget in TTkHelper._overlay:
        TTkHelper._rootWidget.rootLayout().removeWidget(widget._widget)
    TTkHelper._overlay = []
    if TTkHelper._focusWidget:
        TTkHelper._focusWidget.clearFocus()
    if TTkHelper._savedFocus:
        bk = TTkHelper._savedFocus
        TTkHelper._savedFocus = None
        bk.setFocus()</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.removeSingleOverlay"><code class="name flex">
<span>def <span class="ident">removeSingleOverlay</span></span>(<span>widget)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def removeSingleOverlay(widget):
    if len(TTkHelper._overlay) &lt;= 1:
        return TTkHelper.removeOverlay()
    rootWidget = TTkHelper.rootOverlay(widget)
    rootWidget
    for o in TTkHelper._overlay:
        if o._widget == rootWidget:
            TTkHelper._overlay.remove(o)
    TTkHelper._rootWidget.rootLayout().removeWidget(rootWidget)
    TTkHelper._overlay[-1]._widget.setFocus()</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.rootOverlay"><code class="name flex">
<span>def <span class="ident">rootOverlay</span></span>(<span>widget)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def rootOverlay(widget):
    if widget is None:
        return None
    if not TTkHelper._overlay:
        return None
    overlayWidgets = [o._widget for o in TTkHelper._overlay]
    while widget is not None:
        if widget in overlayWidgets:
            return widget
        widget = widget.parentWidget()
    return None</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.setFocus"><code class="name flex">
<span>def <span class="ident">setFocus</span></span>(<span>widget)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def setFocus(widget):
    TTkHelper._focusWidget = widget</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.showCursor"><code class="name flex">
<span>def <span class="ident">showCursor</span></span>(<span>cursorType=1)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def showCursor(cursorType = TTkK.Cursor_Blinking_Block):
    if   cursorType == TTkK.Cursor_Blinking_Block      : TTkHelper._cursorType = lbt.Term.cursor_blinking_block
    elif cursorType == TTkK.Cursor_Blinking_Block_Also : TTkHelper._cursorType = lbt.Term.cursor_blinking_block_also
    elif cursorType == TTkK.Cursor_Steady_Block        : TTkHelper._cursorType = lbt.Term.cursor_steady_block
    elif cursorType == TTkK.Cursor_Blinking_Underline  : TTkHelper._cursorType = lbt.Term.cursor_blinking_underline
    elif cursorType == TTkK.Cursor_Steady_Underline    : TTkHelper._cursorType = lbt.Term.cursor_steady_underline
    elif cursorType == TTkK.Cursor_Blinking_Bar        : TTkHelper._cursorType = lbt.Term.cursor_blinking_bar
    elif cursorType == TTkK.Cursor_Steady_Bar          : TTkHelper._cursorType = lbt.Term.cursor_steady_bar
    lbt.Term.showCursor(TTkHelper._cursorType)
    TTkHelper._cursor = True</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.widgetDepth"><code class="name flex">
<span>def <span class="ident">widgetDepth</span></span>(<span>widget) ‑> int</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def widgetDepth(widget) -&gt; int:
    if widget is None:
        return 0
    return 1 + TTkHelper.widgetDepth(widget.parentWidget())</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="TermTk.TTkCore.helper.TTkHelper.nextFocus"><code class="name flex">
<span>def <span class="ident">nextFocus</span></span>(<span>widget)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def nextFocus(widget):
    rootWidget = TTkHelper.rootOverlay(widget)
    if not rootWidget:
        rootWidget =  TTkHelper._rootWidget
    if widget == rootWidget:
        widget = None
    first = None
    for w in TTkHelper._iterWidgets(rootWidget.rootLayout()):
        if not first and w.focusPolicy() &amp; TTkK.TabFocus == TTkK.TabFocus:
            first = w
        # TTkLog.debug(f&#34;{w._name} {widget}&#34;)
        if widget:
            if w == widget:
                widget=None
            continue
        if w.focusPolicy() &amp; TTkK.TabFocus == TTkK.TabFocus:
            w.setFocus()
            w.update()
            return
    if first:
        first.setFocus()
        first.update()</code></pre>
</details>
</dd>
<dt id="TermTk.TTkCore.helper.TTkHelper.prevFocus"><code class="name flex">
<span>def <span class="ident">prevFocus</span></span>(<span>widget)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def prevFocus(widget):
    rootWidget = TTkHelper.rootOverlay(widget)
    if not rootWidget:
        rootWidget = TTkHelper._rootWidget
    if widget == rootWidget:
        widget = None
    prev = None
    for w in TTkHelper._iterWidgets(rootWidget.rootLayout()):
        # TTkLog.debug(f&#34;{w._name} {widget}&#34;)
        if w == widget:
            widget=None
            if prev:
                break
        if w.focusPolicy() &amp; TTkK.TabFocus == TTkK.TabFocus:
            prev = w
    if prev:
        prev.setFocus()
        prev.update()</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="TermTk.TTkCore" href="index.html">TermTk.TTkCore</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="TermTk.TTkCore.helper.TTkHelper" href="#TermTk.TTkCore.helper.TTkHelper">TTkHelper</a></code></h4>
<ul class="two-column">
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.Color" href="#TermTk.TTkCore.helper.TTkHelper.Color">Color</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.Mv" href="#TermTk.TTkCore.helper.TTkHelper.Mv">Mv</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.absParentPos" href="#TermTk.TTkCore.helper.TTkHelper.absParentPos">absParentPos</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.absPos" href="#TermTk.TTkCore.helper.TTkHelper.absPos">absPos</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.addShortcut" href="#TermTk.TTkCore.helper.TTkHelper.addShortcut">addShortcut</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.addUpdateBuffer" href="#TermTk.TTkCore.helper.TTkHelper.addUpdateBuffer">addUpdateBuffer</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.addUpdateWidget" href="#TermTk.TTkCore.helper.TTkHelper.addUpdateWidget">addUpdateWidget</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.clearFocus" href="#TermTk.TTkCore.helper.TTkHelper.clearFocus">clearFocus</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.execShortcut" href="#TermTk.TTkCore.helper.TTkHelper.execShortcut">execShortcut</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.getFocus" href="#TermTk.TTkCore.helper.TTkHelper.getFocus">getFocus</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.getOverlay" href="#TermTk.TTkCore.helper.TTkHelper.getOverlay">getOverlay</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.hideCursor" href="#TermTk.TTkCore.helper.TTkHelper.hideCursor">hideCursor</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.isOverlay" href="#TermTk.TTkCore.helper.TTkHelper.isOverlay">isOverlay</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.isParent" href="#TermTk.TTkCore.helper.TTkHelper.isParent">isParent</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.moveCursor" href="#TermTk.TTkCore.helper.TTkHelper.moveCursor">moveCursor</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.nextFocus" href="#TermTk.TTkCore.helper.TTkHelper.nextFocus">nextFocus</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.overlay" href="#TermTk.TTkCore.helper.TTkHelper.overlay">overlay</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.paintAll" href="#TermTk.TTkCore.helper.TTkHelper.paintAll">paintAll</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.prevFocus" href="#TermTk.TTkCore.helper.TTkHelper.prevFocus">prevFocus</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.registerRootWidget" href="#TermTk.TTkCore.helper.TTkHelper.registerRootWidget">registerRootWidget</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.removeOverlay" href="#TermTk.TTkCore.helper.TTkHelper.removeOverlay">removeOverlay</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.removeSingleOverlay" href="#TermTk.TTkCore.helper.TTkHelper.removeSingleOverlay">removeSingleOverlay</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.rootOverlay" href="#TermTk.TTkCore.helper.TTkHelper.rootOverlay">rootOverlay</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.setFocus" href="#TermTk.TTkCore.helper.TTkHelper.setFocus">setFocus</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.showCursor" href="#TermTk.TTkCore.helper.TTkHelper.showCursor">showCursor</a></code></li>
<li><code><a title="TermTk.TTkCore.helper.TTkHelper.widgetDepth" href="#TermTk.TTkCore.helper.TTkHelper.widgetDepth">widgetDepth</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>